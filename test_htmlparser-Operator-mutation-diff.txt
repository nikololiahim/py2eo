125c125
<                               (((unsupported)).apply ((((unsupported)).apply ((xL)) ((1.neg)))) ((((unsupported)).apply ("data") (((((unsupported)).apply ((((unsupported)).apply ((xL)) ((1.neg)))) (1)).add (((unsupported)).apply ((xevent)) (1)))))))
---
>                               (((unsupported)).apply ((((unsupported)).apply ((xL)) ((1.neg)))) ((((unsupported)).apply ("data") (((((unsupported)).apply ((((unsupported)).apply ((xL)) ((1.neg)))) (1)).sub (((unsupported)).apply ((xevent)) (1)))))))
207c207
<                           bogusForceDataize.write ((((xself).xfail)).apply ((((((("received events did not match expected events".add "nSource:n").add (((xrepr)).apply ((xsource)))).add "nExpected:n").add ((((xpprint).xpformat)).apply ((xexpected_events)))).add "nReceived:n").add ((((xpprint).xpformat)).apply ((xevents))))))
---
>                           bogusForceDataize.write ((((xself).xfail)).apply ((((((("received events did not match expected events".sub "nSource:n").sub (((xrepr)).apply ((xsource)))).sub "nExpected:n").sub ((((xpprint).xpformat)).apply ((xexpected_events)))).sub "nReceived:n").sub ((((xpprint).xpformat)).apply ((xevents))))))
290c290
<                           bogusForceDataize.write ((((xself).x_run_check)).apply (("<!DOCTYPE %s>".mod (xdtd))) ((((unsupported)).apply ((((unsupported)).apply ("decl") (("DOCTYPE ".add (xdtd))))))))
---
>                           bogusForceDataize.write ((((xself).x_run_check)).apply (("<!DOCTYPE %s>".mod (xdtd))) ((((unsupported)).apply ((((unsupported)).apply ("decl") (("DOCTYPE ".sub (xdtd))))))))
313c313
<                         xcontents.write (((unsupported)).apply ("<!-- not a comment --> &not-an-entity-ref;") ("<not a='start tag'>") ("<a href=\"\" /> <p> <span></span>") ("foo = \"</scr\" + \"ipt>\";") ("foo = \"</SCRIPT\" + \">\";") ("foo = <n/script> ") ("<!-- document.write(\"</scr\" + \"ipt>\"); -->") ((((unsupported)).apply)) ("n<!-- //nvar foo = 3.14;n// -->n") ("foo = \"</sty\" + \"le>\";") ("<!-- u2603 -->"))
---
>                         xcontents.write (((unsupported)).apply ("<!-- not a comment --> &not-an-entity-ref;") ("<not a='start tag'>") ("<a href=\"\" /> <p> <span></span>") ("foo = \"</scr\" - \"ipt>\";") ("foo = \"</SCRIPT\" - \">\";") ("foo = <n/script> ") ("<!-- document.write(\"</scr\" - \"ipt>\"); -->") ((((unsupported)).apply)) ("n<!-- //nvar foo = 3.14;n// -->n") ("foo = \"</sty\" - \"le>\";") ("<!-- u2603 -->"))
567,568c567,568
<                         xhtml.write "<a href=test'style='color:red;bad1'>test - bad1</a><a href=test'+style='color:red;ba2'>test - bad2</a><a href=test'&nbsp;style='color:red;bad3'>test - bad3</a><a href = test'&nbsp;style='color:red;bad4'  >test - bad4</a>"
<                         xexpected.write (((unsupported)).apply ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'style='color:red;bad1'"))))))) ((((unsupported)).apply ("data") ("test - bad1"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'+style='color:red;ba2'"))))))) ((((unsupported)).apply ("data") ("test - bad2"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'xa0style='color:red;bad3'"))))))) ((((unsupported)).apply ("data") ("test - bad3"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'xa0style='color:red;bad4'"))))))) ((((unsupported)).apply ("data") ("test - bad4"))) ((((unsupported)).apply ("endtag") ("a"))))
---
>                         xhtml.write "<a href=test'style='color:red;bad1'>test - bad1</a><a href=test'-style='color:red;ba2'>test - bad2</a><a href=test'&nbsp;style='color:red;bad3'>test - bad3</a><a href = test'&nbsp;style='color:red;bad4'  >test - bad4</a>"
>                         xexpected.write (((unsupported)).apply ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'style='color:red;bad1'"))))))) ((((unsupported)).apply ("data") ("test - bad1"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'-style='color:red;ba2'"))))))) ((((unsupported)).apply ("data") ("test - bad2"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'xa0style='color:red;bad3'"))))))) ((((unsupported)).apply ("data") ("test - bad3"))) ((((unsupported)).apply ("endtag") ("a"))) ((((unsupported)).apply ("starttag") ("a") ((((unsupported)).apply ((((unsupported)).apply ("href") ("test'xa0style='color:red;bad4'"))))))) ((((unsupported)).apply ("data") ("test - bad4"))) ((((unsupported)).apply ("endtag") ("a"))))